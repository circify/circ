#include "{fn}.h"
#include "../../../abycore/circuit/booleancircuits.h"
#include "../../../abycore/circuit/arithmeticcircuits.h"
#include "../../../abycore/circuit/circuit.h"

#include "../../../abycore/sharing/sharing.h"

int32_t test_{fn}_circuit(std::map<std::string, std::string> params, e_role role, const std::string& address, 
	uint16_t port, seclvl seclvl, uint32_t bitlen, uint32_t nthreads, e_mt_gen_alg mt_alg, e_sharing sharing) {

	// setup
	ABYParty* party = new ABYParty(role, address, port, seclvl, bitlen, nthreads, mt_alg);
	std::vector<Sharing*>& sharings = party->GetSharings();
	Circuit* acirc = sharings[S_ARITH]->GetCircuitBuildRoutine();
	Circuit* bcirc = sharings[S_BOOL]->GetCircuitBuildRoutine();
	Circuit* ycirc = sharings[S_YAO]->GetCircuitBuildRoutine();

	share *s_out;

	// compiled circuit
	{circ}

	// output
	party->ExecCircuit();
	uint32_t output = s_out->get_clear_value<uint32_t>();
	std::cout << "output: " << output << std::endl;
	delete party;
	return 0;
}
